from math import log10

import matplotlib.pyplot as plt
from matplotlib import colormaps

plt.rcParams.update(
    {
        "font.size": 22,
        "font.family": "Fira Code",
    }
)

x_label = "Number of requests"
y_label = "RTT (second)"
rtts = [
    0.692,
    0.694,
    0.69,
    0.69,
    0.69,
    0.695,
    0.693,
    0.691,
    0.712,
    0.69,
    0.687,
    0.7,
    0.688,
    0.694,
    0.69,
    0.69,
    0.689,
    0.689,
    0.692,
    0.69,
    0.692,
    0.69,
    0.692,
    0.695,
    0.712,
    0.881,
    0.887,
    1.093,
    1.296,
    1.307,
    1.644,
    1.646,
    1.648,
    1.648,
    1.651,
    1.651,
    1.653,
    1.655,
    1.653,
    1.656,
    1.657,
    1.658,
    1.657,
    1.659,
    1.851,
    3.698,
    3.696,
    3.693,
    3.697,
    3.693,
    3.703,
    3.701,
    3.704,
    3.707,
    3.697,
    3.706,
    3.7,
    3.704,
    3.7,
    3.699,
    3.707,
    3.702,
    3.71,
    3.704,
    3.713,
    3.704,
    3.711,
    3.706,
    3.705,
    3.71,
    3.71,
    3.714,
    3.713,
    4.187,
    4.197,
    7.838,
    7.838,
    7.84,
    7.843,
    7.843,
    7.846,
    7.841,
    7.843,
    7.85,
    7.849,
    7.853,
    7.849,
    7.854,
    7.853,
    7.852,
    7.858,
    7.857,
    7.86,
    7.861,
    7.86,
    7.863,
    7.865,
    7.868,
    7.868,
    7.885,
    8.049,
    8.055,
    8.472,
    8.47,
    8.851,
    16.067,
    16.071,
    16.07,
    16.072,
    16.072,
    16.073,
    16.074,
    16.075,
    16.075,
    16.08,
    16.077,
    16.077,
    16.076,
    16.083,
    16.079,
    16.076,
    16.076,
    16.079,
    16.079,
    16.08,
    16.088,
    16.081,
    16.086,
    16.082,
    16.264,
    16.269,
    16.539,
    16.562,
    16.569,
    17.048,
    32.162,
    32.17,
    32.169,
    32.169,
    32.168,
    32.171,
    32.175,
    32.175,
    32.173,
    32.176,
    32.177,
    32.179,
    32.18,
    32.18,
    32.184,
    32.186,
    32.193,
    32.184,
    32.192,
    32.187,
    32.188,
    32.194,
    32.19,
    32.2,
    32.196,
    32.221,
    32.37,
    32.384,
    32.396,
    32.666,
    65.464,
    65.465,
    65.471,
    65.471,
    65.471,
    65.47,
    65.47,
    65.471,
    65.474,
    65.473,
    65.471,
    65.478,
    65.475,
    65.476,
    65.478,
    65.475,
    65.476,
    65.479,
    65.482,
    65.479,
    65.477,
    65.477,
    65.476,
    65.477,
    65.476,
    65.484,
    65.481,
    65.665,
    65.664,
    65.668,
    130.464,
    130.465,
    130.465,
    130.465,
    1.133,
    1.148,
    1.129,
    1.127,
    1.129,
    1.135,
    1.134,
    1.142,
    1.134,
    1.131,
    1.142,
    1.134,
    1.134,
    1.145,
    1.135,
    1.141,
    1.144,
    1.14,
    1.144,
    1.144,
    1.143,
    1.145,
    1.143,
    1.144,
    1.144,
    1.143,
    1.143,
    1.145,
    1.438,
    2.125,
    2.092,
    2.093,
    2.095,
    2.101,
    2.102,
    2.102,
    2.101,
    2.106,
    2.104,
    2.109,
    2.109,
    2.116,
    2.114,
    2.12,
    2.122,
    4.173,
    4.173,
    4.167,
    4.17,
    4.17,
    4.168,
    4.174,
    4.178,
    4.176,
    4.18,
    4.17,
    4.18,
    4.175,
    4.182,
    4.175,
    4.175,
    4.176,
    4.185,
    4.19,
    4.192,
    4.191,
    4.185,
    4.194,
    4.192,
    4.191,
    4.479,
    4.483,
    4.86,
    5.071,
    5.108,
    8.372,
    8.38,
    8.382,
    8.387,
    8.382,
    8.386,
    8.385,
    8.386,
    8.388,
    8.387,
    8.391,
    8.392,
    8.393,
    8.394,
    8.387,
    8.389,
    8.394,
    8.398,
    8.4,
    8.392,
    8.397,
    8.399,
    8.401,
    8.405,
    8.406,
    8.409,
    8.41,
    8.656,
    8.695,
    9.097,
    16.617,
    16.614,
    16.621,
    16.616,
    16.612,
    16.612,
    16.626,
    16.627,
    16.626,
    16.62,
    16.623,
    16.618,
    16.628,
    16.629,
    16.628,
    16.626,
    16.626,
    16.631,
    16.631,
    16.628,
    16.626,
    16.636,
    16.635,
    16.632,
    16.634,
    16.644,
    16.932,
    17.103,
    17.534,
    17.603,
    32.703,
    32.702,
    32.699,
    32.707,
    32.706,
    32.706,
    32.708,
    32.711,
    32.71,
    32.711,
    32.716,
    32.717,
    32.718,
    32.72,
    32.722,
    32.716,
    32.722,
    32.725,
    32.726,
    32.722,
    32.727,
    32.733,
    32.735,
    32.739,
    33.008,
    33.024,
    33.02,
    33.141,
    33.432,
    33.653,
    66.511,
    66.519,
    66.518,
    66.521,
    66.522,
    66.519,
    66.519,
    66.52,
    66.524,
    66.522,
    66.52,
    66.528,
    66.521,
    66.524,
    66.525,
    66.525,
    66.529,
    66.531,
    66.535,
    66.535,
    66.533,
    66.537,
    66.536,
    66.541,
    66.54,
    66.542,
    66.544,
    66.82,
    67.006,
    67.228,
    131.139,
    131.139,
    131.139,
    131.138,
    0.697,
    0.694,
    0.695,
    0.694,
    0.7,
    0.693,
    0.691,
    0.695,
    0.701,
    0.698,
    0.693,
    0.693,
    0.699,
    0.697,
    0.698,
    0.703,
    0.695,
    0.695,
    0.706,
    0.727,
    0.703,
    0.707,
    0.703,
    0.71,
    0.726,
    0.718,
    0.735,
    0.892,
    1.165,
    1.179,
    1.655,
    1.658,
    1.663,
    1.664,
    1.665,
    1.667,
    1.667,
    1.67,
    1.671,
    1.667,
    1.668,
    1.671,
    1.674,
    1.676,
    1.696,
    3.726,
    3.727,
    3.728,
    3.726,
    3.73,
    3.726,
    3.729,
    3.725,
    3.729,
    3.733,
    3.729,
    3.727,
    3.733,
    3.726,
    3.734,
    3.734,
    3.728,
    3.728,
    3.728,
    3.729,
    3.734,
    3.732,
    3.739,
    3.748,
    3.76,
    3.923,
    3.926,
    3.93,
    4.228,
    4.238,
    7.932,
    7.933,
    7.934,
    7.936,
    7.94,
    7.938,
    7.941,
    7.943,
    7.94,
    7.942,
    7.945,
    7.946,
    7.944,
    7.946,
    7.945,
    7.953,
    7.953,
    7.954,
    7.954,
    7.954,
    7.956,
    7.95,
    7.959,
    7.959,
    7.96,
    7.961,
    7.963,
    7.967,
    8.139,
    8.41,
    16.16,
    16.162,
    16.161,
    16.164,
    16.161,
    16.162,
    16.165,
    16.168,
    16.165,
    16.166,
    16.172,
    16.167,
    16.168,
    16.175,
    16.164,
    16.164,
    16.171,
    16.168,
    16.168,
    16.176,
    16.177,
    16.174,
    16.171,
    16.178,
    16.179,
    16.171,
    16.174,
    16.177,
    16.662,
    16.802,
    32.263,
    32.26,
    32.261,
    32.261,
    32.265,
    32.266,
    32.268,
    32.269,
    32.272,
    32.267,
    32.274,
    32.277,
    32.275,
    32.278,
    32.278,
    32.282,
    32.281,
    32.281,
    32.284,
    32.279,
    32.286,
    32.463,
    32.471,
    32.47,
    32.473,
    32.466,
    32.744,
    32.911,
    33.291,
    33.297,
    65.047,
    65.048,
    65.05,
    65.049,
    65.047,
    65.049,
    65.051,
    65.049,
    65.051,
    65.048,
    65.05,
    65.05,
    65.054,
    65.054,
    65.05,
    65.052,
    65.055,
    65.058,
    65.056,
    65.058,
    65.056,
    65.058,
    65.057,
    65.058,
    65.062,
    65.061,
    65.072,
    65.201,
    65.245,
    65.553,
    130.034,
    130.035,
    130.037,
    130.035,
    1.112,
    1.112,
    1.116,
    1.109,
    1.112,
    1.105,
    1.117,
    1.103,
    1.116,
    1.107,
    1.111,
    1.109,
    1.117,
    1.11,
    1.113,
    1.118,
    1.11,
    1.113,
    1.119,
    1.113,
    1.119,
    1.114,
    1.113,
    1.14,
    1.114,
    1.117,
    1.12,
    1.134,
    1.38,
    2.047,
    2.06,
    2.062,
    2.061,
    2.066,
    2.066,
    2.065,
    2.067,
    2.068,
    2.071,
    2.07,
    2.075,
    2.073,
    2.078,
    2.085,
    2.906,
    4.134,
    4.133,
    4.133,
    4.135,
    4.138,
    4.138,
    4.14,
    4.134,
    4.138,
    4.142,
    4.134,
    4.141,
    4.141,
    4.137,
    4.142,
    4.14,
    4.141,
    4.14,
    4.14,
    4.142,
    4.139,
    4.149,
    4.142,
    4.143,
    4.144,
    4.154,
    4.334,
    4.777,
    4.971,
    5.067,
    8.187,
    8.184,
    8.187,
    8.184,
    8.187,
    8.193,
    8.187,
    8.191,
    8.194,
    8.192,
    8.196,
    8.192,
    8.196,
    8.194,
    8.193,
    8.192,
    8.198,
    8.201,
    8.197,
    8.198,
    8.203,
    8.205,
    8.209,
    8.201,
    8.203,
    8.211,
    8.204,
    8.395,
    8.459,
    8.831,
    16.411,
    16.412,
    16.411,
    16.411,
    16.414,
    16.413,
    16.414,
    16.413,
    16.414,
    16.417,
    16.415,
    16.415,
    16.41,
    16.413,
    16.417,
    16.417,
    16.422,
    16.419,
    16.422,
    16.419,
    16.416,
    16.421,
    16.42,
    16.419,
    16.419,
    16.421,
    16.424,
    16.682,
    16.688,
    17.431,
    32.506,
    32.519,
    32.512,
    32.516,
    32.513,
    32.523,
    32.524,
    32.52,
    32.518,
    32.522,
    32.517,
    32.523,
    32.521,
    32.525,
    32.526,
    32.525,
    32.523,
    32.525,
    32.526,
    32.523,
    32.53,
    32.532,
    32.53,
    32.536,
    32.531,
    32.538,
    32.793,
    32.796,
    32.803,
    33.359,
    65.552,
    65.546,
    65.553,
    65.554,
    65.554,
    65.553,
    65.554,
    65.556,
    65.56,
    65.559,
    65.56,
    65.559,
    65.56,
    65.561,
    65.557,
    65.564,
    65.559,
    65.561,
    65.561,
    65.562,
    65.569,
    65.566,
    65.565,
    65.567,
    65.573,
    65.574,
    65.578,
    65.833,
    66.192,
    66.4,
    130.18,
    130.18,
    130.181,
    130.18,
    1.339,
    1.353,
    1.335,
    1.339,
    1.336,
    1.338,
    1.34,
    1.336,
    1.339,
    1.335,
    1.338,
    1.335,
    1.349,
    1.338,
    1.342,
    1.338,
    1.338,
    1.341,
    1.34,
    1.343,
    1.341,
    1.344,
    1.35,
    1.357,
    1.668,
    1.848,
    2.065,
    2.071,
    2.095,
    2.341,
    2.289,
    2.286,
    2.287,
    2.292,
    2.292,
    2.291,
    2.29,
    2.29,
    2.292,
    2.292,
    2.294,
    2.293,
    2.294,
    2.295,
    2.295,
    4.349,
    4.35,
    4.354,
    4.352,
    4.353,
    4.358,
    4.357,
    4.348,
    4.349,
    4.352,
    4.356,
    4.358,
    4.355,
    4.352,
    4.353,
    4.357,
    4.364,
    4.355,
    4.357,
    4.365,
    4.365,
    4.361,
    4.37,
    4.378,
    4.682,
    4.699,
    5.092,
    5.358,
    5.355,
    5.349,
    8.336,
    8.339,
    8.339,
    8.341,
    8.343,
    8.344,
    8.344,
    8.342,
    8.351,
    8.349,
    8.346,
    8.347,
    8.351,
    8.35,
    8.355,
    8.356,
    8.356,
    8.353,
    8.359,
    8.358,
    8.359,
    8.358,
    8.36,
    8.358,
    8.362,
    8.357,
    8.601,
    8.676,
    8.683,
    9.083,
    16.563,
    16.562,
    16.564,
    16.568,
    16.565,
    16.574,
    16.571,
    16.572,
    16.568,
    16.572,
    16.579,
    16.582,
    16.573,
    16.572,
    16.573,
    16.583,
    16.578,
    16.585,
    16.578,
    16.575,
    16.578,
    16.584,
    16.587,
    16.584,
    16.908,
    16.906,
    16.919,
    16.918,
    17.312,
    17.565,
    32.67,
    32.667,
    32.672,
    32.672,
    32.676,
    32.669,
    32.678,
    32.675,
    32.673,
    32.676,
    32.681,
    32.678,
    32.682,
    32.687,
    32.682,
    32.686,
    32.686,
    32.682,
    32.685,
    32.691,
    32.69,
    32.691,
    32.694,
    32.691,
    32.693,
    33.004,
    33.008,
    33.211,
    33.211,
    33.412,
    66.723,
    66.729,
    66.73,
    66.732,
    66.732,
    66.733,
    66.734,
    66.736,
    66.736,
    66.735,
    66.731,
    66.731,
    66.736,
    66.734,
    66.737,
    66.737,
    66.739,
    66.736,
    66.736,
    66.74,
    66.738,
    66.738,
    66.745,
    66.737,
    66.746,
    66.743,
    67.261,
    67.325,
    67.465,
    68.108,
    131.186,
    131.186,
    131.186,
    131.187,
]
rtts_id = 2  # US, UK, CA, FR, DE
rtts = rtts[(rtts_id - 1) * 199 : rtts_id * 199]


fig, ax = plt.subplots(figsize=(12, 6))

viridis = colormaps["viridis"]
for i, rtt in enumerate(rtts):
    ii = log10(rtt) / (log10(rtts[-1]) - log10(rtts[0]))
    color = viridis(ii)
    Y = color[0] * 0.2 + color[1] * 0.7 + color[2] * 0.1
    if Y > 0.5:
        color = (color[0] / Y * 0.5, color[1] / Y * 0.5, color[2] / Y * 0.5, color[3])
    ax.plot(i + 1, rtt, ".", c=color)

ax.set_xlabel(x_label)
ax.set_ylabel(y_label)

ax.set_yscale("log")

# ax.spines[:].set_visible(False)

plt.savefig(f"scatter-rtt-gql_k5027_UK.png", bbox_inches="tight")
plt.close(fig)
